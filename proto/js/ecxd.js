var ecxd=ecxd||{};ecxd.namespace=function(a){var d=a.split("."),c=ecxd,b;if(d[0]==="ecxd"){d=d.slice(1)}for(b=0;b<d.length;b+=1){if(typeof c[d[b]]==="undefined"){c[d[b]]={}}c=c[d[b]]}return c};var JSON;if(!JSON){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());function Validator(){}Validator.require=function(a,b){if(a===undefined||a===null){if("console" in window){console.trace()}throw new Error("Validator - Please provide a valid variable.")}Validator.optional(a,b);return};Validator.optional=function(p_var,p_type){if(p_var!==undefined&&p_var!==null){if(p_type!==undefined){if(typeof(p_type)!="string"){if("console" in window){console.trace()}throw new TypeError("Validator - The variable type should be of type: string.")}if(typeof(p_var)!=p_type.toLowerCase()){var isInstance;try{isInstance=(p_var instanceof eval(p_type))}catch(ex){throw new TypeError("Validator - "+p_type+" is not a valid instance type.")}if(!isInstance){if("console" in window){console.trace()}throw new TypeError("Validator - "+p_var+" should be of type: "+p_type+".")}}}else{if("console" in window){console.warn("Validator - Unable to validate the type since it wasn't provided.")}}}};ecxd.namespace("ecxd.AjaxManager");ecxd.AjaxManager=(ecxd.AjaxManager.getInstance)?ecxd.AjaxManager:(function(){var a=null;function b(){var T="3.0.0.0";var F="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(ao){var an=Math.random()*16|0,ap=ao=="x"?an:(an&3|8);return ap.toString(16)});var ac=0;var m={};var ad={};var ab={};var k={};var P={};var am={};var D={};var af={};var y=window.location.protocol.toLowerCase()+"//"+window.location.host.toLowerCase();var z="ecxd.html";var h={};var ai={};var g={};var aj=false;if(navigator.appName=="Microsoft Internet Explorer"){var j=-1;var x=-1;var i=navigator.userAgent;var I=/MSIE ([0-9]{1,}[\.0-9]{0,})/;if(I.exec(i)!==null){j=parseFloat(RegExp.$1)}var o=/Windows NT ([0-9]{1,}[\.0-9]{0,})/;if(o.exec(i)!==null){x=parseFloat(RegExp.$1)}aj=((j>0&&j<8)||(j>7&&j<9&&x<6))}var ah=(("postMessage" in window)&&!aj)?true:false;var w=[];var X="loaded";var E="ready";var H="registerDomain";var t="ajax";var B="success";var O="error";var l="confirm";var W=15000;this.getRequestTimeout=function(){return W};this.setRequestTimeout=function(an){W=an};var K=true;this.getRetryOnTimeoutOnly=function(){return K};this.setRetryOnTimeoutOnly=function(an){K=an};var V=2;this.getNumberOfTries=function(){return V};this.setNumberOfTries=function(an){V=an};var L=15000;this.getInitializationTimeout=function(){return L};this.setInitializationTimeout=function(an){L=an};var ae=false;this.getUseCORS=function(){return ae};this.setUseCORS=function(an){ae=an};var c=function(ao,ar,at,ap,au,av){var an=Z(ar,ai[at]);var aq=ad[at];delete ad[at];delete ab[at];delete m[at];delete am[at];delete ai[at];if(aq){aq({data:an,transactionId:at,url:ao,responseHeaders:ap,statusCode:au.toString(),statusText:av})}};var S=function(ap,aw,av,au,ar,ao,ax,ay){var aq=ao-1;if(aq<1||(K&&ay!="timeout")){var an=(av.length>0)?Z(av,ai[au]):av;var at=ab[au];delete ad[au];delete ab[au];delete m[au];delete am[au];delete ai[au];if(at){at({data:an,transactionId:au,url:ap,responseHeaders:ar,statusCode:ax.toString(),statusText:ay})}}else{var az=(af[ag(ap)])?true:false;r(aw,ap,aq,au,av,az)}};var Z=function(aq,ao){var an=aq;try{if(ao==="json"){an=JSON.parse(aq)}else{if(ao==="xml"){an=s(aq)}}}catch(ap){an=null}return an};var s=function(an,ao,ap){if(window.DOMParser){ap=new DOMParser();ao=ap.parseFromString(an,"text/xml")}else{ao=new ActiveXObject("Microsoft.XMLDOM");ao.async="false";ao.loadXML(an)}ap=ao.documentElement;if(!ap||!ap.nodeName||ap.nodeName==="parsererror"){ao=null}return ao};var ag=function(ao){var ap=ao.replace(/([a-zA-Z0-9]*?:\/\/).*?(\/.*|$)/,"$1").toLowerCase();var an=ao.replace(/[a-zA-Z0-9]*?:\/\/(.*?)(\/.*|$|:\d+.*)/,"$1").toLowerCase();var aq=ao.replace(/[a-zA-Z0-9]*?:\/\/.*?(:\d+)?($|\/.*)/,"$1").toLowerCase();return ap+an+aq};var r=function(au,aq,ap,aw,av,ar){m[aw]=ap;if(!ar){var an=new window.XMLHttpRequest();var ay=-1;g[aw]=an;an.onreadystatechange=function(){if(ay==an.readyState){return}ay=an.readyState;if(an.readyState==1){var aB=am[aw];for(var az in aB){if(aB.hasOwnProperty(az)){an.setRequestHeader(az,aB[az])}}}else{if(an.readyState==4){try{var aB=J(an.getAllResponseHeaders());delete g[aw];if(an.status===0){S(aq,au,"",aw,aB,ap,an.status,"timeout")}else{if(an.status>=200&&an.status<300||an.status===304||an.status===1223){var aC=(an.status===1223)?"No Content":an.statusText;var aA=(an.status===1223)?204:an.status;c(aq,an.responseText,aw,aB,aA,aC)}else{var aC;try{aC=an.statusText}catch(aD){aC=""}S(aq,au,an.responseText,aw,aB,ap,an.status,aC)}}}catch(aD){S(aq,au,"",aw,aB,ap,0,"timeout")}}}};an.open(au,aq,true);an.send(av);(function(az){setTimeout(function(){e(az)},W)}(aw))}else{var at=ag(aq);var ax={};ax.messageType=t;ax.domainOrigin=y;ax.ajaxRequestType=au;ax.ajaxRequestTimeout=W;ax.ajaxRequestUrl=aq;ax.ajaxRequestPostData=av;ax.ajaxRequestTransactionId=aw;ax.ajaxRequestNumberOfTries=ap;ax.ajaxRequestHeaders=am[aw];var ao=document.getElementById(af[at]);if(ao.length<1){throw new Error("ecxd.AjaxManager._makeRequest() - There is no iFrame on the page that is associated with the domain of this request: "+requestDomain)}al(ao,ax,at)}};var e=function(an){var ao=g[an];delete g[an];if(ao){if(ao.readyState!=4){console.warn("ecxd.AjaxManager._abortXhr(): "+an);ao.abort()}}};var aa=function(ap){var ao;try{ao=JSON.parse(ap.data)}catch(an){if("console" in window){console.log("Error parsing message: "+ao)}ao={messageType:"none"}}u(ao,ap.source,ap.origin)};var u=function(ao,ap,ar){if(af[ar]){switch(ao.messageType){case l:n();Y();break;case X:var aq={};aq.messageType=H;aq.domainOrigin=y;al(ap,aq,ar);break;case E:if(!ah){n();Y()}D[ar]=true;var an=k[ar];delete k[ar];if(an){an({origin:ar})}break;case t:if(!ah){n();Y()}if(ao.ajaxReponseType==O){S(ao.ajaxRequestUrl,ao.ajaxRequestType,ao.ajaxReponseData,ao.ajaxRequestTransactionId,ao.ajaxResponseHeaders,ao.ajaxRequestNumberOfTries,ao.ajaxStatusCode,ao.ajaxStatusText)}else{if(ao.ajaxReponseType==B){c(ao.ajaxRequestUrl,ao.ajaxReponseData,ao.ajaxRequestTransactionId,ao.ajaxResponseHeaders,ao.ajaxStatusCode,ao.ajaxStatusText)}}break;default:}}else{if("console" in window){console.warn("A message was received from either a domain that timed out or an invalid domain: "+ar)}}};var q=function(au){var ao=document.getElementsByTagName("body")[0];var ar=document.createElement("iframe");var at=new Date();var an=Math.floor(Math.random()*1000000);var ap="frame_"+at.getTime()+"_"+an;ar.setAttribute("id",ap);ar.setAttribute("name",ap);ar.setAttribute("width","10");ar.setAttribute("height","10");ar.style.cssText="position:absolute;left:-900px;top:0px;";var aq=au+"/ecxd/"+T+"/"+z+"?origin="+y;ar.setAttribute("src",aq);ao.appendChild(ar);return ap};var ak=function(ao){var an=document.getElementsByTagName("body")[0];var ap=document.getElementById(ao);if(ap){ap.setAttribute("src","");an.removeChild(ap)}};var U=function(ao){if(!D[ao]){var ap=af[ao];ak(ap);delete af[ao];if(ap){var an=P[ao];delete P[ao];an({origin:ao})}if("console" in window){console.log("The following domain timed out: "+ao)}}};var f=function(an){var ap=h[an.origin];delete h[an.origin];for(var ao=0;ao<ap.length;ao++){r(ap[ao].type,ap[ao].url,V,ap[ao].transactionId,ap[ao].data,true)}};var C=function(an){var ap=h[an.origin];delete h[an.origin];var aq="Unable to establish comminucation with "+an.origin;for(var ao=0;ao<ap.length;ao++){S(ap[ao].url,ap[ao].type,"",ap[ao].transactionId,{},0,0,aq)}};var N=function(ap){var ao=ag(ap);var an=ag(window.location.href);return(ao!==an)};var J=function(au){var at=au.split("\n");var ao={};for(var ar in at){if(at.hasOwnProperty(ar)){at[ar]=at[ar].replace(/^\s*/,"").replace(/\s*$/,"");var ap=at[ar].indexOf(":");var aq=at[ar].slice(0,ap);if(aq.length<1){continue}var an=at[ar].slice(ap+1);an=an.replace(/^\s+/,"");ao[aq]=an}}return ao};var al=function(an,ao,ar){if(ah){var ap=false;try{ap=(("contentWindow" in an)&&(an.contentWindow!==undefined))}catch(aq){ap=false}if(ap){an.contentWindow.postMessage(JSON.stringify(ao),ar)}else{an.postMessage(JSON.stringify(ao),ar)}}else{Q(window.escape(JSON.stringify(ao)),an)}};var M=function(){a.reset()};var d=0;var R=2080;var A="!_!_!_splitStart_!_!_!";var p="!_!_!_splitEnd_!_!_!";var G=function(an){var ao=an.indexOf("#");if(ao>-1){an=an.substr(0,ao)}return an};var Q=function(au,ap){var aq=ap.getAttribute("src").length;var an=R-aq;if(au.length>an){var ar=Math.ceil(au.length/an);Q(A+"&origin="+y,ap);for(var ao=0;ao<ar;ao++){var at=au.substring(ao*an,((ao+1)*an));Q(at,ap)}Q(p,ap)}else{if(d>0){w.push({message:au,destination:ap});d++}else{d++;v(au,ap)}}};var Y=function(){if(w.length>0){var an=w.shift();v(an.message,an.destination)}};var v=function(an,ao){ao.contentWindow.location.href=ao.getAttribute("src")+"#"+an;ao.width=ao.width>50?50:100};var n=function(){if(d>0){d--}};this.onMessageFromClientProxy=function(ao,aq){try{ao=JSON.parse(ao)}catch(ap){ao={messageType:"none"}}var an=document.getElementById(af[aq]);u(ao,an,aq)};this.sendConfirmation=function(ap,aq){var an=document.getElementById(af[ap]);var ao={messageType:l,totalMsgLen:aq.length};v(JSON.stringify(ao),an)};this.request=function(ax){Validator.require(ax.url,"string");Validator.optional(ax.type,"string");Validator.optional(ax.requestHeaders,"object");Validator.optional(ax.handleAs,"string");Validator.optional(ax.data,"string");Validator.optional(ax.preventCache,"boolean");Validator.optional(ax.successHandler,"function");Validator.optional(ax.errorHandler,"function");ax.type=ax.type||ecxd.AjaxManager.GET;var aA=ag(ax.url);if(!ax.handleAs){var an=/(json|xml)(?=(\?.*|$))/gi;var at=an.exec(ax.url);ax.handleAs=(at)?at[0]:"json"}if(ax.preventCache&&ax.type===ecxd.AjaxManager.GET){var ay=ax.url.indexOf("?");var ao=(ay<0)?"?":"&";ax.url+=(ao+"ecxd.AjaxManager.preventCache="+new Date().getTime())}var au=false;var av={};if(ax.requestHeaders){for(var aw in ax.requestHeaders){if(ax.requestHeaders.hasOwnProperty(aw)){av[aw]=ax.requestHeaders[aw];if(aw.toLowerCase()==="content-type"){au=true}}}}if(ax.type===ecxd.AjaxManager.PUT_OVERRIDE_POST){av["X-HTTP-Method"]=ecxd.AjaxManager.PUT;ax.type=ecxd.AjaxManager.POST}else{if(ax.type===ecxd.AjaxManager.DELETE_OVERRIDE_POST){av["X-HTTP-Method"]=ecxd.AjaxManager.DELETE;ax.type=ecxd.AjaxManager.POST}}if(!au){switch(ax.handleAs){case ecxd.AjaxManager.JSON:av["Content-Type"]="application/json";break;case ecxd.AjaxManager.XML:av["Content-Type"]="application/xml";break;case ecxd.AjaxManager.TEXT:av["Content-Type"]="text/plain";break;default:}}var ar=ac+":"+F;ad[ar]=ax.successHandler;ab[ar]=ax.errorHandler;am[ar]=av;ai[ar]=ax.handleAs;var az=new window.XMLHttpRequest();var aq=N(ax.url);var ap=ae&&("withCredentials" in az);if(ae&&!ap){if("console" in window){console.log("AjaxManager is set to use CORS, but your browser doesn't support CORS. Falling back to using window.postMessage")}}if(aq&&!ap){if(!af[aA]){var aB={type:ax.type,url:ax.url,data:ax.data,transactionId:ar};h[aA]=[aB];this.initialize({origin:aA,successHandler:f,errorHandler:C})}else{if(!D[aA]){var aB={type:ax.type,url:ax.url,data:ax.data,transactionId:ar};if(!h[aA]){throw new Error("ecxd.AjaxManager.request() - Please wait for the domain to be initialized before calling this method.")}h[aA].push(aB)}else{r(ax.type,ax.url,V,ar,ax.data,true)}}}else{r(ax.type,ax.url,V,ar,ax.data,false)}ac++;return ar};this.initialize=function(ao){Validator.require(ao.origin,"string");Validator.optional(ao.successHandler,"function");Validator.optional(ao.errorHandler,"function");ao.origin=ao.origin.toLowerCase();if(!document.body){throw new Error("ecxd.AjaxManager.initialize() - The DOM is not ready to be manipulated. Please wait for the DOM to be ready before initializing a domain.")}if(af[ao.origin]){throw new Error("ecxd.AjaxManager.initialize() - '"+ao.origin+"' has already been initialized.")}if(ao.origin===""||ao.origin==="*"||ao.origin.indexOf(".")<0){throw new Error("ecxd.AjaxManager.initialize() - '"+ao.origin+"' is not a valid domain URL.")}D[ao.origin]=false;var an=q(ao.origin);af[ao.origin]=an;k[ao.origin]=ao.successHandler;P[ao.origin]=ao.errorHandler;(function(ap){setTimeout(function(){U(ap)},L)}(ao.origin))};this.reset=function(){for(var an in af){if(af.hasOwnProperty(an)){ak(af[an])}}af={};k={};P={};D={};h={};ad={};ab={};am={};ai={};m={};W=300000;K=true;V=3;L=15000;ae=false};if(typeof window.addEventListener!="undefined"){window.addEventListener("message",aa,false)}else{if(typeof window.attachEvent!="undefined"){window.attachEvent("onmessage",aa);window.attachEvent("onunload",M)}else{throw new Error("ecxd.AjaxManager.constructor() - Oops! Your browser doesn't support event listeners.")}}}b.prototype.toString=function(){return"[object ecxd.AjaxManager]"};return new function(){this.getInstance=function(){if(a==null){a=new b();a.constructor=null}return a}}}());ecxd.AjaxManager.GET="get";ecxd.AjaxManager.POST="post";ecxd.AjaxManager.PUT="put";ecxd.AjaxManager.DELETE="delete";ecxd.AjaxManager.PUT_OVERRIDE_POST="putOverride";ecxd.AjaxManager.DELETE_OVERRIDE_POST="deleteOverride";ecxd.AjaxManager.JSON="json";ecxd.AjaxManager.XML="xml";ecxd.AjaxManager.TEXT="text";ecxd.namespace("ecxd.decorators.AjaxCache");ecxd.decorators.AjaxCache=(function(){var o;var l;var k;var p;var j;var n=function(r){var s=l.requestsByTID[r.transactionId];var t={};t.uniqueRequestKey=s.uniqueRequestKey;t.transactionId=r.transactionId;t.requestorIndex=s.requestorIndex;t.responseData=r;b(t);var v,u;for(v=0;v<s.successCallbacks.length;v++){u=d(r);u.transactionId=s.successCallbacks[v].uniqueTransactionId;s.successCallbacks[v].callback(u)}f(s)};var e=function(r){var s=l.requestsByTID[r.transactionId];var u,t;for(u=0;u<s.errorCallbacks.length;u++){t=d(r);t.transactionId=s.errorCallbacks[u].uniqueTransactionId;s.errorCallbacks[u].callback(t)}f(s)};var c=function(r){return JSON.parse(JSON.stringify(r))};var d=function(s){var t={};if(s.data&&s.data.documentElement&&("cloneNode" in s.data.documentElement)){if(document.implementation&&document.implementation.createDocument){t.data=document.implementation.createDocument(null,s.data.documentElement.nodeName,null)}else{t.data=new ActiveXObject("MSXML2.DOMDocument");t.data.loadXML("<"+s.data.documentElement.nodeName+"/>")}for(var r=0;r<s.data.documentElement.attributes.length;r++){t.data.documentElement.setAttribute(s.data.documentElement.attributes.item(r).nodeName,s.data.documentElement.attributes.item(r).nodeValue)}for(var u=0;u<s.data.documentElement.childNodes.length;u++){t.data.documentElement.appendChild(s.data.documentElement.childNodes[u].cloneNode(true))}}else{if(s.data){t.data=JSON.parse(JSON.stringify(s.data))}else{t.data=s.data}}t.responseHeaders=s.responseHeaders?JSON.parse(JSON.stringify(s.responseHeaders)):s.responseHeaders;t.statusCode=s.statusCode;t.statusText=s.statusText;t.transactionId=s.transactionId;t.url=s.url;return t};var g=function(v){var s,u,r=[],t="";for(u in v){if(v.hasOwnProperty(u)){r.push({headerName:u.toLowerCase(),headerValue:v[u]})}}r.sort(function(w,x){if(w.headerName<x.headerName){return -1}if(w.headerName>x.headerName){return 1}return 0});for(s=0;s<r.length;s++){t+=r[s].headerName+r[s].headerValue}return t};var q=function(s){var r="#";r+=s.type||ecxd.AjaxManager.GET;r+="#";r+=s.url;r+="#";r+=s.handleAs||"default";r+="#";r+=(s.requestHeaders)?g(s.requestHeaders):"none";r+="#";r=r.replace(/\r\n/gm,"").replace(/\\r\\n/gm,"").replace(/(\n|\\n|\r|\\r|\t|\\t|\f|\\f|\v|\\v)/gm,"");return r};var a=function(r){l.requestsByURK[r.uniqueRequestKey]=l.requestsByTID[r.transactionId]=r};var f=function(r){delete l.requestsByURK[r.uniqueRequestKey];delete l.requestsByTID[r.transactionId]};var b=function(r){l.responsesByURK[r.uniqueRequestKey]=l.responsesByTID[r.transactionId]=r;(function(s){setTimeout(function(){i(s)},(k*1000))}(r))};var i=function(r){delete l.responsesByURK[r.uniqueRequestKey];delete l.responsesByTID[r.transactionId]};var m=function(){l.responsesByURK=l.responsesByTID={}};var h=function(){l.requestsByURK=l.requestsByTID={}};l=ecxd.namespace("ecxd.decorators.AjaxCache.GlobalStorage");l.responsesByURK=l.responsesByURK||{};l.responsesByTID=l.responsesByTID||{};l.requestsByURK=l.requestsByURK||{};l.requestsByTID=l.requestsByTID||{};j=function(r){Validator.require(r.component,"Object");Validator.require(r.invalidateCacheMap,"Array");Validator.optional(r.secondsToCache,"Number");o=r.component;p=r.invalidateCacheMap;k=r.secondsToCache||30};j.prototype={constructor:ecxd.decorators.AjaxCache,version:"1.0",getRequestTimeout:function(){return o.getRequestTimeout()},setRequestTimeout:function(r){return o.setRequestTimeout(r)},getRetryOnTimeoutOnly:function(){return o.getRetryOnTimeoutOnly()},setRetryOnTimeoutOnly:function(r){return o.setRetryOnTimeoutOnly(r)},getNumberOfTries:function(){return o.getNumberOfTries()},setNumberOfTries:function(r){return o.setNumberOfTries(r)},getInitializationTimeout:function(){return o.getInitializationTimeout()},setInitializationTimeout:function(r){return o.setInitializationTimeout(r)},getUseCORS:function(){return o.getUseCORS()},setUseCORS:function(r){return o.setUseCORS(r)},request:function(t){Validator.require(t.url,"string");Validator.optional(t.type,"string");Validator.optional(t.requestHeaders,"object");Validator.optional(t.handleAs,"string");Validator.optional(t.successHandler,"function");Validator.optional(t.errorHandler,"function");var r,s,A,v,y;if(t.type&&t.type!=ecxd.AjaxManager.GET){var C,z;for(r=0;r<p.length;r++){C=p[r].triggerMatch;z=p[r].invalidateMatches;if(t.url.match(C)){this.invalidateCache(z);break}}return o.request(t)}else{var x=q(t),B;for(A in l.requestsByURK){if(l.requestsByURK.hasOwnProperty(A)&&A==x){v=l.requestsByURK[A];v.requestorIndex+=1;B=v.transactionId+"_"+v.requestorIndex;if(t.successHandler){v.successCallbacks.push({callback:t.successHandler,uniqueTransactionId:B})}if(t.errorHandler){v.errorCallbacks.push({callback:t.errorHandler,uniqueTransactionId:B})}return B}}for(A in l.responsesByURK){if(l.responsesByURK.hasOwnProperty(A)&&A==x){y=l.responsesByURK[A];y.requestorIndex+=1;B=y.transactionId+"_"+y.requestorIndex;if(t.successHandler){var u=d(y.responseData);u.transactionId=B;(function(D,E){setTimeout(function(){D(E)},100)}(t.successHandler,u))}return B}}var w={};w.requestorIndex=0;w.uniqueRequestKey=x;w.successCallbacks=[];w.errorCallbacks=[];if(t.successHandler){w.successCallbacks.push({callback:t.successHandler})}if(t.errorHandler){w.errorCallbacks.push({callback:t.errorHandler})}t.successHandler=n;t.errorHandler=e;w.transactionId=o.request(t);B=w.transactionId+"_"+w.requestorIndex;if(w.successCallbacks[0]){w.successCallbacks[0].uniqueTransactionId=B}if(w.errorCallbacks[0]){w.errorCallbacks[0].uniqueTransactionId=B}a(w);return B}},initialize:function(r){return o.initialize(r)},reset:function(){m();h();return o.reset()},onMessageFromClientProxy:function(r,s){return o.onMessageFromClientProxy(r,s)},sendConfirmation:function(r,s){return o.sendConfirmation(r,s)},toString:function(){return"[object ecxd.decorators.AjaxCache]"},invalidateCache:function(v){Validator.optional(v,"Array");var r,t,u,s;if(v&&v.length){for(r=0;r<v.length;r++){s=v[r];for(t in l.responsesByURK){if(l.responsesByURK.hasOwnProperty(t)){u=l.responsesByURK[t];if(u.responseData.url.match(s)){i(u)}}}}}else{m()}}};return j}());